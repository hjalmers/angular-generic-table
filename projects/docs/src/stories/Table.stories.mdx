import { Meta, Story } from '@storybook/addon-docs';

import {moduleMetadata} from "@storybook/angular";
import {BrowserModule} from "@angular/platform-browser";
import {CommonModule} from "@angular/common";
import {GenericTableCoreModule} from "../../../core/src/lib/core.module";
import {Simple, SimpleComponent} from "../app/examples/simple/simple.component";
import {Advanced, AdvancedComponent} from "../app/examples/advanced/advanced.component";
import {ReactiveFormsModule} from "@angular/forms";
import {TabsComponent} from "../app/components/tabs/tabs.component";
import {CustomTemplates, CustomTemplatesComponent} from "../app/examples/custom-templates/custom-templates.component"; import {Pagination,
  PaginationComponent
} from "../app/examples/pagination/pagination.component"; import {HttpClientModule} from "@angular/common/http"; import {GenericTablePaginationModule} from "../../../core/src/lib/pagination/pagination.module"; import {Horizontal,
  TransposeComponent
} from "../app/examples/transpose/transpose.component";

<Meta title="Examples" decorators={[
  moduleMetadata({
    declarations: [CustomTemplatesComponent, SimpleComponent, AdvancedComponent, PaginationComponent, TransposeComponent, TabsComponent],
    imports: [BrowserModule, CommonModule, GenericTableCoreModule, GenericTablePaginationModule, ReactiveFormsModule, HttpClientModule],
  })]}/>

# Examples

## Basic table

Pass `data` and `config` to table to generate a table. The example below uses the minimal configuration needed to generate a table with static data.

<Story name="Basic table"
       args={{
         data: [
           {
             firstName: 'Mark',
             lastName: 'Parker',
             gender: 'male',
             favoriteFood: 'Pasta',
           },
           {
             firstName: 'Mary Jane',
             lastName: 'Watson',
             gender: 'female',
             favoriteFood: 'Pizza',
           },
         ]
       }}>
  {Simple.bind({})}
</Story>

## Custom templates

Define custom templates and assign them to different columns using the `templateRef` property when declaring `columns` in `config`.

<Story name="Custom templates"
       args={{
         data: [
           {
             firstName: 'Peter',
             lastName: 'Parker',
             gender: 'male',
             favoriteColor: '#26BFAF',
             favoriteFood: 'Pasta',
           },
           {
             firstName: 'Mary Jane',
             lastName: 'Watson',
             gender: 'female',
             favoriteColor: '#0f0',
             favoriteFood: 'Pizza',
           },
         ]
       }}>
  {CustomTemplates.bind({})}
</Story>

## Advanced example

Example showcasing:
* Row sort
* Loading state
* Empty state
* Global search
* Mobile table layout with sticky header (resize viewport to < 576px to view example)
* Custom pagination
* Add/remove data
* Custom templates

<Story name="Advanced"
       args={{
         data: [
           {
             firstName: 'Peter',
             lastName: 'Parker',
             gender: 'male',
             favoriteColor: '#26BFAF',
             favoriteFood: 'Pasta',
           },
           {
             firstName: 'Mary Jane',
             lastName: 'Watson',
             gender: 'female',
             favoriteColor: '#0f0',
             favoriteFood: 'Pizza',
           },
         ]
       }}>
  {Advanced.bind({})}
</Story>


## Pagination example

What would a table be without pagination? To simplify things for you, Angular Generic Table provides a basic pagination component. Just pass a reference to the table like this:
```markup
<angular-generic-table #tableRef" .../>
<angular-generic-table-pagination [table]="tableRef"/>
```

### Import module
In order to use the pagination component provided by angular generic table, you need to import it.
```ts
import { GenericTableCoreModule, GenericTablePaginationModule } from '@angular-generic-table/core';

@NgModule({
  declarations: [...],
  imports: [
    ...
    GenericTableCoreModule,
    GenericTablePaginationModule
  ],
  exports: [
    GenericTableCoreModule,
    GenericTablePaginationModule
  ]
})
export class SharedModule {}
```

<Story name="Pagination">
  {Pagination.bind({})}
</Story>

## Horizontal example

Declare `rows` instead of `columns` to get a horizontal table where records are added as columns instead of rows.

<Story name="Horizontal table">
  {Horizontal.bind({})}
</Story>
